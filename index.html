<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>PowerBots360 — Pro, rapide, fiable</title>
<meta name="theme-color" content="#0f172a">
<style>
/* ====== Variables UI ====== */
:root{
  --bg:#0b1020;
  --fg:#e5e7eb;
  --muted:#94a3b8;
  --line:rgba(255,255,255,.14);
  --glass:rgba(255,255,255,.08);
  --glass-strong:rgba(255,255,255,.10);
  --accent:#22c55e;
  --accent2:#0ea5e9;
  --danger:#ef4444;

  --maxw:1200px;
  --radius:12px;
  --shadow:0 10px 30px rgba(0,0,0,.25);

  --btn-h:36px;
  --btn-px:12px;
  --fs:14px;
}

/* ====== Reset court ====== */
*,*::before,*::after{box-sizing:border-box}
html,body{height:100%}
html{scroll-behavior:smooth}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
  color:var(--fg);
  background:var(--bg) url('https://i.postimg.cc/0j8Jbgfg/IMG-3217.jpg') center/cover fixed no-repeat;
  -webkit-tap-highlight-color: transparent;
}
a{color:inherit;text-decoration:none}
img{display:block;max-width:100%}
button{font:inherit}

/* léger voile pour la lisibilité */
.bg-overlay{position:fixed;inset:0;pointer-events:none;
  background:linear-gradient(to bottom,rgba(2,6,23,.7),rgba(2,6,23,.35) 35%,rgba(2,6,23,.7));z-index:0}

/* ====== Conteneurs ====== */
.container{position:relative;z-index:1;max-width:var(--maxw);margin:0 auto;padding:16px}
.card{background:var(--glass-strong);backdrop-filter:blur(8px);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow);padding:16px}

/* ====== Header compact + burger ====== */
header{position:sticky;top:0;z-index:20;background:rgba(2,6,23,.75);backdrop-filter:blur(10px);border-bottom:1px solid var(--line)}
.nav{display:flex;align-items:center;justify-content:space-between;gap:12px;max-width:var(--maxw);margin:0 auto;padding:8px 12px;min-height:56px}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:28px;height:28px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #22d3ee, #2563eb 60%, #0ea5e9);
  box-shadow:0 0 16px rgba(56,189,248,.4), inset 0 0 10px rgba(59,130,246,.45)}
.brand h1{margin:0;font-size:16px;color:#f1f5f9}
.badge{font-size:11px;padding:2px 8px;border-radius:999px;background:var(--accent2);color:#fff}

/* Boutons compacts et homogènes */
.btn{
  height:var(--btn-h); padding:0 var(--btn-px);
  border-radius:10px; border:1px solid var(--line);
  background:var(--glass); color:var(--fg); cursor:pointer; font-size:var(--fs);
  display:inline-flex; align-items:center; gap:6px; transition:background .2s, transform .1s;
  touch-action: manipulation;
}
.btn:hover{background:rgba(255,255,255,.12)}
.btn:active{transform:translateY(1px)}
.btn-primary{background:linear-gradient(90deg,#22c55e,#16a34a);border:none;color:#fff}
.btn-danger{background:linear-gradient(90deg,#ef4444,#b91c1c);border:none;color:#fff}

/* actions desktop */
.actions{display:none;align-items:center;gap:8px;flex-wrap:wrap}

/* burger mobile */
.burger{width:38px;height:38px;border-radius:10px;border:1px solid var(--line);background:var(--glass);display:flex;align-items:center;justify-content:center}
.burger span{width:18px;height:2px;background:#cbd5e1;position:relative}
.burger span::before,.burger span::after{content:"";position:absolute;left:0;width:18px;height:2px;background:#cbd5e1}
.burger span::before{top:-6px}.burger span::after{top:6px}

/* menu latéral */
.menu{position:fixed;inset:0 0 0 auto;width:min(92%,380px);transform:translateX(100%);transition:.25s;z-index:30;
  background:rgba(15,23,42,.98);border-left:1px solid var(--line);padding:16px;display:flex;flex-direction:column;gap:10px}
.menu.open{transform:none}
.menu .row{display:flex;align-items:center;justify-content:space-between}
.menu .list{display:grid;gap:10px}
.menu .btn{justify-content:flex-start}

/* ====== Hero ====== */
.hero{display:grid;gap:12px;margin:16px 0}
.hero h2{margin:0;font-size:24px;line-height:1.25}
.hero p{margin:0;color:#cbd5e1}
.pillbar{display:flex;gap:8px;flex-wrap:wrap}
.pill{padding:6px 10px;border-radius:999px;background:rgba(2,6,23,.55);border:1px solid var(--line);font-size:12px}

/* ====== Outils catalogue ====== */
.field{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:12px;border:1px solid var(--line);background:var(--glass);color:var(--fg)}
.field input,.field select{all:unset;color:var(--fg);font-size:16px} /* 16px = anti-zoom iOS */
.field input::placeholder{color:#cbd5e1}

/* ====== Grille Catalogue ====== */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px}
.service{display:flex;flex-direction:column;gap:10px;padding:12px;border-radius:14px;background:rgba(2,6,23,.55);border:1px solid var(--line);transition:transform .15s, box-shadow .15s}
.service:hover{transform:translateY(-2px);box-shadow:0 8px 22px rgba(0,0,0,.25)}
.service h3{margin:0;font-size:15px}
.meta{display:flex;gap:6px;flex-wrap:wrap}
.chip{font-size:11px;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,.1);border:1px solid var(--line)}
.row{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap}
.price{color:#86efac;font-weight:800}
.old{text-decoration:line-through;color:#9aa5b1;margin-left:6px}
.qtyInput{
  width:80px;height:32px;border-radius:8px;border:1px solid var(--line);
  background:var(--glass);color:var(--fg);text-align:center;font-size:16px
}

/* ====== Panier ====== */
.drawer{position:fixed;inset:0 0 0 auto;width:min(92%,420px);transform:translateX(100%);transition:.25s;z-index:40;
  background:rgba(15,23,42,.98);border-left:1px solid var(--line);padding:16px;color:var(--fg);overflow:auto}
.drawer.open{transform:none}
.line{display:flex;justify-content:space-between;gap:10px;margin:8px 0}
.muted{color:var(--muted);font-size:13px}
.divider{height:1px;background:var(--line);margin:10px 0}
.total{font-size:18px;font-weight:800}
.promo{display:flex;gap:6px}
.promo input{all:unset;flex:1;height:36px;padding:0 10px;border-radius:10px;background:var(--glass);border:1px solid var(--line);color:var(--fg);font-size:16px}

/* ====== Modale ====== */
.modal{position:fixed;inset:0;background:rgba(2,6,23,.6);display:none;align-items:center;justify-content:center;z-index:50}
.modal.open{display:flex}
.modal .card{max-width:520px;width:92%}

/* ====== Footer ====== */
footer{color:var(--muted);text-align:center;padding:24px}

/* ====== Desktop ====== */
@media (min-width:900px){
  .actions{display:flex}
  .burger{display:none}
  .menu{display:none}
  .hero{grid-template-columns:1.2fr .8fr;align-items:center}
}
</style>
</head>
<body>
<div class="bg-overlay"></div>

<!-- ===== Header ===== -->
<header>
  <div class="nav">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <h1>PowerBots360</h1>
      <span class="badge" id="langBadge">FR</span>
    </div>

    <!-- Actions desktop -->
    <div class="actions" role="navigation" aria-label="Navigation principale">
      <button class="btn" data-goto="home">Accueil</button>
      <button class="btn" data-goto="catalogue">Catalogue</button>
      <button class="btn" data-goto="contact">Contact</button>
      <button class="btn" data-goto="legal">Légal</button>
      <select class="btn" id="currency">
        <option value="EUR" selected>€ EUR</option>
        <option value="USD">$ USD</option>
        <option value="GBP">£ GBP</option>
      </select>
      <button class="btn" id="toggleLang">EN/FR</button>
      <button class="btn" id="loginBtn">Connexion</button>
      <button class="btn btn-primary" id="openCart">Panier (<span id="cartCount">0</span>)</button>
    </div>

    <!-- Burger mobile -->
    <button class="burger" id="openMenu" aria-label="Menu"><span></span></button>
  </div>
</header>

<!-- Menu mobile -->
<aside class="menu" id="mobileMenu" aria-label="Menu">
  <div class="row">
    <strong>Menu</strong>
    <button class="btn" id="closeMenu">Fermer</button>
  </div>
  <div class="list">
    <button class="btn" data-goto="home">Accueil</button>
    <button class="btn" data-goto="catalogue">Catalogue</button>
    <button class="btn" data-goto="contact">Contact</button>
    <button class="btn" data-goto="legal">Légal</button>
    <select class="btn" id="currency_m">
      <option value="EUR" selected>€ EUR</option>
      <option value="USD">$ USD</option>
      <option value="GBP">£ GBP</option>
    </select>
    <button class="btn" id="toggleLang_m">EN/FR</button>
    <button class="btn" id="loginBtn_m">Connexion</button>
    <button class="btn btn-primary" id="openCart_m">Panier (<span id="cartCount_m">0</span>)</button>
  </div>
</aside>

<main class="container">
  <!-- ===== Hero ===== -->
  <section id="home" class="card">
    <div class="hero">
      <div>
        <h2 id="heroTitle">Des bots fiables pour booster vos réseaux — pro, rapides, transparents.</h2>
        <p id="heroSubtitle">Recherche avancée, panier sécurisé, paiement PayPal — tout en un. Multi-langues, multi-devises, codes promo et support réactif.</p>
        <div class="pillbar" aria-label="atouts">
          <span class="pill">PayPal</span>
          <span class="pill">800+ services</span>
          <span class="pill">Multi-plateformes</span>
          <span class="pill">Support 24/7</span>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn btn-primary" data-goto="catalogue">Voir le catalogue</button>
          <button class="btn" data-goto="contact">Parler à un conseiller</button>
        </div>
      </div>

      <div class="card" style="background:rgba(2,6,23,.55);border-color:var(--line)">
        <div class="row"><strong>Connexion rapide (Démo)</strong><span class="muted">Aucune donnée sensible côté serveur.</span></div>
        <div class="divider"></div>
        <div class="row" style="gap:8px;flex-wrap:wrap">
          <input id="demoEmail" class="btn" placeholder="email@exemple.com" style="flex:1;min-width:220px">
          <input id="demoPass"  class="btn" type="password" placeholder="Mot de passe" style="flex:1;min-width:160px">
          <button class="btn" id="demoSignup">Créer</button>
          <button class="btn" id="demoSignin">Se connecter</button>
          <button class="btn btn-danger" id="demoSignout">Déconnexion</button>
        </div>
        <div id="authState" class="muted" style="margin-top:8px">Statut : invité</div>
      </div>
    </div>
  </section>

  <!-- ===== Catalogue ===== -->
  <section id="catalogue" class="card" hidden>
    <div class="row" style="align-items:stretch">
      <div class="field" style="flex:1"><span>🔎</span><input id="search" placeholder="Rechercher un service (ex : TikTok likes)…"></div>
      <div class="field"><span>🏷️</span>
        <select id="platform">
          <option value="all">Toutes plateformes</option>
          <option>TikTok</option><option>Instagram</option><option>YouTube</option>
          <option>Facebook</option><option>Twitter/X</option><option>Snapchat</option>
          <option>Twitch</option><option>Reddit</option><option>LinkedIn</option>
          <option>Telegram</option><option>Spotify</option><option>Discord</option>
        </select>
      </div>
      <div class="field"><span>⚙️</span>
        <select id="sort">
          <option value="pop">Populaires</option>
          <option value="priceAsc">Prix ↑</option>
          <option value="priceDesc">Prix ↓</option>
        </select>
      </div>
    </div>

    <div class="grid" id="grid"></div>
    <div style="text-align:center;margin-top:10px">
      <button class="btn" id="loadMore">Charger plus</button>
    </div>
  </section>

  <!-- ===== Contact ===== -->
  <section id="contact" class="card" hidden>
    <h3>Contact</h3>
    <p class="muted">Besoin d’aide ? Laisse-nous un message, on répond vite.</p>
    <form id="contactForm" class="grid">
      <input class="btn" name="name" placeholder="Nom complet" required>
      <input class="btn" name="email" placeholder="Email" type="email" required>
      <textarea class="btn" name="msg" placeholder="Message" rows="4" required style="height:120px"></textarea>
      <button class="btn btn-primary" type="submit">Envoyer</button>
    </form>
    <div id="contactOk" class="muted" style="margin-top:8px;display:none">Merci, votre message a été envoyé (simulation).</div>
  </section>

  <!-- ===== Légal ===== -->
  <section id="legal" class="card" hidden>
    <h3>Mentions légales & Conditions</h3>
    <details open><summary>Mentions légales</summary><p class="muted">PowerBots360 – Contact : support@powerbots360.com</p></details>
    <details><summary>CGU/CGV</summary><p class="muted">Prestations numériques après paiement. Respect des règles des plateformes. Pas d’usage nuisible.</p></details>
    <details><summary>Confidentialité</summary><p class="muted">Cookies techniques, aucune revente de données.</p></details>
  </section>
</main>

<!-- ===== Panier ===== -->
<aside id="cart" class="drawer" aria-label="Panier">
  <div class="row"><h3 style="margin:0">Panier</h3><button class="btn" id="closeCart">Fermer</button></div>
  <div class="divider"></div>
  <div id="cartItems"></div>
  <div class="divider"></div>
  <div class="line"><span>Sous-total</span><span id="subTotal">0.00</span></div>
  <div class="line"><span>Remise</span><span id="discount">0.00</span></div>
  <div class="line"><span>Devise</span><span id="currencyView">EUR</span></div>
  <div class="total line"><span>Total</span><span id="grandTotal">0.00</span></div>
  <div class="promo">
    <input id="coupon" placeholder="Code promo (WELCOME10 / VIP5)">
    <button class="btn" id="applyCoupon">Appliquer</button>
  </div>
  <div class="divider"></div>
  <button class="btn btn-primary" id="checkout">Passer au paiement</button>
</aside>

<!-- ===== Modale de confirmation ===== -->
<div class="modal" id="confirmModal" role="dialog" aria-modal="true">
  <div class="card">
    <h3 style="margin-top:0">Confirmer votre commande</h3>
    <p class="muted">Un récapitulatif va s’ouvrir avant le paiement PayPal.</p>
    <div class="divider"></div>
    <div class="row">
      <button class="btn" id="cancelConfirm">Annuler</button>
      <button class="btn btn-primary" id="goPay">Payer avec PayPal</button>
    </div>
  </div>
</div>

<script>
/* ========= ÉTAT GLOBAL ========= */
const state = {
  lang:'fr',
  currency:'EUR',
  rate:{EUR:1,USD:1.08,GBP:0.85},
  catalog:[],
  cart:[],
  coupon:null,
  user:null
};
const PAYPAL_ME='https://www.paypal.me/BotMarketPlus';

/* ========= NAV / MENUS ========= */
const sections=[...document.querySelectorAll('main section')];
function show(id){ sections.forEach(s=>s.hidden = (s.id!==id)); closeMenu(); }
document.querySelectorAll('[data-goto]').forEach(b=>b.addEventListener('click',()=>show(b.dataset.goto)));

/* burger */
const mobileMenu=document.getElementById('mobileMenu');
const openMenu = ()=> mobileMenu.classList.add('open');
const closeMenu = ()=> mobileMenu.classList.remove('open');
document.getElementById('openMenu').onclick=openMenu;
document.getElementById('closeMenu').onclick=closeMenu;

/* sync actions mobile/desktop */
function syncCounts(){
  const n = state.cart.reduce((a,b)=>a+b.qty,0);
  document.getElementById('cartCount').textContent=n;
  document.getElementById('cartCount_m').textContent=n;
}
document.getElementById('openCart').onclick=()=>document.getElementById('cart').classList.add('open');
document.getElementById('openCart_m').onclick=()=>document.getElementById('cart').classList.add('open');
document.getElementById('closeCart').onclick=()=>document.getElementById('cart').classList.remove('open');

/* langue */
const i18n={
  fr:{title:'Des bots fiables pour booster vos réseaux — pro, rapides, transparents.',
      sub:'Recherche avancée, panier sécurisé, paiement PayPal — tout en un. Multi-langues, multi-devises, codes promo et support réactif.'},
  en:{title:'Reliable bots to grow your socials — pro, fast, transparent.',
      sub:'Advanced search, secure cart, PayPal checkout — all-in-one. Multilingual, multi-currency, coupons & responsive support.'}
};
function switchLang(){
  state.lang = state.lang==='fr' ? 'en' : 'fr';
  document.getElementById('langBadge').textContent = state.lang.toUpperCase();
  document.getElementById('heroTitle').textContent = i18n[state.lang].title;
  document.getElementById('heroSubtitle').textContent = i18n[state.lang].sub;
}
document.getElementById('toggleLang').onclick=switchLang;
document.getElementById('toggleLang_m').onclick=switchLang;

/* devise */
function setCurrency(v){ state.currency=v; renderGrid(true); renderCart(); }
document.getElementById('currency').onchange=e=>{ setCurrency(e.target.value); document.getElementById('currency_m').value=e.target.value; };
document.getElementById('currency_m').onchange=e=>{ setCurrency(e.target.value); document.getElementById('currency').value=e.target.value; };

/* ========= CATALOGUE ========= */
const PLATFORMS=["TikTok","Instagram","YouTube","Facebook","Twitter/X","Snapchat","Twitch","Reddit","LinkedIn","Telegram","Spotify","Discord"];
const BASE=[
  {name:"Likes",min:100,max:50000,base:1.8},
  {name:"Followers",min:100,max:100000,base:2.2},
  {name:"Views",min:500,max:1000000,base:1.5},
  {name:"Comments",min:20,max:10000,base:3.9},
  {name:"Live Boost",min:50,max:50000,base:2.8},
  {name:"Shares",min:50,max:50000,base:1.7}
];
const WATCH=[{name:"BotWatch — Compliance Scan",min:1,max:1000,base:4.5,tag:"Nouveau"}];
function buildCatalog(){
  const items=[]; let id=1;
  for(const p of PLATFORMS){
    for(const s of WATCH){ items.push({id:id++,platform:p,title:`${p} ${s.name}`,speed:"Rapide",refill:true,priceEUR:+(s.base+Math.random()*1.8).toFixed(2),oldEUR:null,min:s.min,max:s.max,tag:s.tag,popular:true}); }
    for(const b of BASE){
      for(let v=0;v<10;v++){
        const price = b.base + v*0.08 + Math.random()*0.5;
        items.push({id:id++,platform:p,title:`${p} ${b.name} v${v+1}`,speed:["Instant","Rapide","Progressif"][Math.floor(Math.random()*3)],refill:Math.random()<0.6,priceEUR:+price.toFixed(2),oldEUR:Math.random()<0.25?+(price*1.2).toFixed(2):null,min:b.min,max:b.max,tag:["Premium","Eco","Pro","Safe"][Math.floor(Math.random()*4)],popular:Math.random()<0.45});
      }
    }
  }
  state.catalog=items;
}
buildCatalog();

const grid=document.getElementById('grid');
let page=0,PAGE_SIZE=36;

function fmt(n,cur){return (cur==='EUR'?'€':cur==='USD'?'$':'£')+' '+n.toFixed(2)}
function toCur(eur){const r=state.rate[state.currency]||1;return {num:eur*(state.currency==='EUR'?1:r), txt:fmt(eur*(state.currency==='EUR'?1:r),state.currency)}}

function cardTpl(it){
  const p=toCur(it.priceEUR); const old = it.oldEUR? toCur(it.oldEUR).txt:null;
  return `<div class="service" data-id="${it.id}">
      <h3>${it.title}</h3>
      <div class="meta">
        <span class="chip">${it.platform}</span>
        <span class="chip">${it.speed}</span>
        ${it.refill?'<span class="chip">Refill</span>':''}
        ${it.tag?`<span class="chip">${it.tag}</span>`:''}
        ${it.popular?'<span class="chip">Populaire</span>':''}
      </div>
      <div class="row">
        <div><span class="price">${p.txt}</span>${old?`<span class="old">${old}</span>`:''}</div>
        <small class="muted">Min ${it.min} / Max ${it.max}</small>
      </div>
      <div class="row">
        <input class="qtyInput" type="number" min="${it.min}" max="${it.max}" step="${Math.ceil(it.min/5)}" value="${it.min}">
        <button class="btn addBtn">Ajouter</button>
      </div>
    </div>`;
}

function renderGrid(reset=false){
  if(reset){ grid.innerHTML=''; page=0; }
  const q=document.getElementById('search').value.trim().toLowerCase();
  const pf=document.getElementById('platform').value;
  const sort=document.getElementById('sort').value;

  let list=state.catalog.filter(s=>{
    const byP=(pf==='all')||s.platform===pf;
    const byQ=!q||s.title.toLowerCase().includes(q);
    return byP&&byQ;
  });
  if(sort==='priceAsc') list.sort((a,b)=>a.priceEUR-b.priceEUR);
  if(sort==='priceDesc') list.sort((a,b)=>b.priceEUR-a.priceEUR);
  if(sort==='pop') list.sort((a,b)=> (b.popular|0) - (a.popular|0));

  const slice=list.slice(page*PAGE_SIZE,(page+1)*PAGE_SIZE);
  grid.insertAdjacentHTML('beforeend', slice.map(cardTpl).join(''));
  page++;
  document.getElementById('loadMore').style.display = (page*PAGE_SIZE < list.length) ? 'inline-flex' : 'none';
}
renderGrid(true);
document.getElementById('loadMore').onclick=()=>renderGrid(false);
document.getElementById('search').oninput=()=>renderGrid(true);
document.getElementById('platform').onchange=()=>renderGrid(true);
document.getElementById('sort').onchange=()=>renderGrid(true);

/* add to cart */
grid.addEventListener('click',e=>{
  const btn=e.target.closest('.addBtn'); if(!btn) return;
  const card=e.target.closest('.service'); const id=+card.dataset.id;
  const qty=+card.querySelector('.qtyInput').value;
  const item=state.catalog.find(s=>s.id===id); if(!item) return;
  const q=Math.min(Math.max(qty,item.min),item.max);
  const exist=state.cart.find(c=>c.id===id);
  if(exist) exist.qty+=q; else state.cart.push({id,title:item.title,platform:item.platform,priceEUR:item.priceEUR,qty:q});
  renderCart(); syncCounts();
});

/* ========= PANIER ========= */
function discountOf(subEUR){
  const c=(state.coupon||'').toUpperCase();
  if(c==='WELCOME10') return subEUR*0.10;
  if(c==='VIP5') return subEUR*0.05;
  return 0;
}
function renderCart(){
  const wrap=document.getElementById('cartItems'); wrap.innerHTML='';
  let subEUR=0;
  for(const c of state.cart){
    subEUR+= c.priceEUR * c.qty / 1000; /* prix pour 1000 unités */
    const line=document.createElement('div'); line.className='line';
    line.innerHTML=`<div>
        <div><strong>${c.title}</strong></div>
        <div class="muted">${c.qty} unités · € ${c.priceEUR.toFixed(2)}/1000</div>
      </div>
      <div><button class="btn rm" data-id="${c.id}">✕</button></div>`;
    wrap.appendChild(line);
  }
  const disc=discountOf(subEUR);
  const sub=toCur(subEUR), d=toCur(disc), tot=toCur(Math.max(0,subEUR-disc));
  document.getElementById('subTotal').textContent=sub.txt;
  document.getElementById('discount').textContent=d.txt;
  document.getElementById('grandTotal').textContent=tot.txt;
  document.getElementById('currencyView').textContent=state.currency;

  wrap.querySelectorAll('.rm').forEach(b=>b.onclick=()=>{ state.cart=state.cart.filter(x=>x.id!==+b.dataset.id); renderCart(); syncCounts(); });
}
renderCart();
document.getElementById('applyCoupon').onclick=()=>{ state.coupon=(document.getElementById('coupon').value||null); renderCart(); };

/* checkout + modale */
const confirmModal=document.getElementById('confirmModal');
document.getElementById('checkout').onclick=()=>{ if(!state.cart.length){alert('Panier vide.');return;} confirmModal.classList.add('open'); };
document.getElementById('cancelConfirm').onclick=()=>confirmModal.classList.remove('open');
document.getElementById('goPay').onclick=()=>{
  let subEUR=0; for(const c of state.cart) subEUR+= c.priceEUR*c.qty/1000;
  const totalEUR=Math.max(1, +(subEUR-discountOf(subEUR)) / (state.currency==='EUR'?1:(state.rate[state.currency]||1))).toFixed(2);
  window.open(`${PAYPAL_ME}/${totalEUR}`,'_blank');
  confirmModal.classList.remove('open');
};

/* ========= AUTH démo ========= */
function setUser(u){ state.user=u; document.getElementById('authState').textContent = u?`Connecté : ${u.email}`:'Statut : invité'; 
  document.getElementById('loginBtn').textContent = u?'Mon compte':'Connexion';
  document.getElementById('loginBtn_m').textContent = document.getElementById('loginBtn').textContent;
}
document.getElementById('demoSignup').onclick=()=>{
  const email=demoEmail.value.trim(), pass=demoPass.value.trim();
  if(email && pass.length>=6){ localStorage.setItem('pb360_user',JSON.stringify({email})); setUser({email}); alert('Compte créé (démo).'); }
  else alert('Email/mot de passe invalide (min 6).');
};
document.getElementById('demoSignin').onclick=()=>{
  const email=demoEmail.value.trim(), pass=demoPass.value.trim();
  const stored=localStorage.getItem('pb360_user');
  if(stored){ const u=JSON.parse(stored); if(email===u.email && pass.length>=6){ setUser(u); alert('Connecté.'); } else alert('Identifiants incorrects (démo).'); }
  else alert('Aucun compte (démo). Cliquez “Créer”.');
};
document.getElementById('demoSignout').onclick=()=>{ localStorage.removeItem('pb360_user'); setUser(null); };

/* ========= Recherche initiale ========= */
show('home'); // home par défaut
</script>

<footer>© PowerBots360 — tous droits réservés</footer>
</body>
</html>
