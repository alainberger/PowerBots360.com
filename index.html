<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no" />
<title>PowerBots360 — Services & Paiement</title>
<meta name="theme-color" content="#0b1020"/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1020;
  --glass:rgba(13,18,34,.62);
  --glass-strong:rgba(13,18,34,.86);
  --border:rgba(255,255,255,.12);
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#22c55e;
  --accent-2:#0ea5e9;
  --danger:#ef4444;
  --shadow:0 12px 36px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{height:100%}
html{-webkit-text-size-adjust:100%}
body{
  margin:0;font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;color:var(--text);
  background:#0b1020 url('https://i.postimg.cc/qRzJKc7j/IMG-3273.jpg') center/cover fixed no-repeat;
}
a{color:inherit;text-decoration:none}
button{font:inherit}
img{max-width:100%;display:block}
input,select,textarea{font:inherit;color:var(--text)}

.bg-overlay{position:fixed;inset:0;background:linear-gradient(to bottom, rgba(2,6,23,.76), rgba(2,6,23,.38) 35%, rgba(2,6,23,.76));pointer-events:none;z-index:0}
.container{position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:16px}

/* Header */
header{
  position:sticky;top:0;z-index:30;background:var(--glass-strong);backdrop-filter:blur(12px);
  border-bottom:1px solid var(--border);
}
.nav{
  max-width:1200px;margin:0 auto;padding:10px 12px;display:flex;align-items:center;justify-content:space-between;gap:8px;
}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:34px;height:34px;border-radius:10px;background:
  radial-gradient(55% 55% at 30% 30%, #22d3ee, #2563eb 60%, #0ea5e9);
  box-shadow:0 0 18px rgba(56,189,248,.45), inset 0 0 12px rgba(59,130,246,.50);
}
.brand h1{margin:0;font-size:18px;letter-spacing:.02em}
.badge{font-size:11px;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,.1);border:1px solid var(--border)}

.actions{display:flex;align-items:center;gap:8px}
.btn{
  border:1px solid var(--border);background:rgba(255,255,255,.08);color:var(--text);
  padding:9px 14px;border-radius:999px;cursor:pointer;transition:.2s;display:inline-flex;align-items:center;gap:8px
}
.btn:hover{background:rgba(255,255,255,.14)}
.btn-primary{background:linear-gradient(90deg,#22c55e,#16a34a);border:none}
.btn-danger{background:linear-gradient(90deg,#ef4444,#b91c1c);border:none}
.icon{width:18px;height:18px;display:inline-block}

/* Hamburger drawer */
.hamb{display:flex;flex-direction:column;gap:4px;cursor:pointer;padding:8px;border-radius:8px;border:1px solid var(--border);background:rgba(255,255,255,.06)}
.hamb span{width:22px;height:2px;background:#fff;border-radius:2px}
.drawer{
  position:fixed;right:0;top:0;height:100%;width:92%;max-width:420px;background:rgba(6,10,22,.96);
  border-left:1px solid var(--border);transform:translateX(100%);transition:.25s;z-index:40;color:var(--text);padding:18px 14px;overflow:auto;
  box-shadow:var(--shadow)
}
.drawer.open{transform:none}
.menu-head{display:flex;align-items:center;justify-content:space-between}
.menu-section{margin:12px 0;padding:12px;border:1px solid var(--border);border-radius:12px;background:rgba(255,255,255,.06)}
.menu-list{display:grid;grid-template-columns:repeat(2,minmax(120px,1fr));gap:8px}
.menu-list a,.menu-list button{display:flex;align-items:center;gap:8px;padding:10px;border-radius:10px;background:rgba(255,255,255,.06);border:1px solid var(--border)}
.menu-list a:hover{background:rgba(255,255,255,.12)}
.langbox{display:flex;gap:8px}
.langbox button{flex:1}

/* Cards & sections */
.card{
  background:rgba(255,255,255,.08);backdrop-filter:blur(8px);
  border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:var(--shadow)
}
section{margin:14px 0}
.hidden{display:none}

/* Hero */
.hero{display:grid;gap:12px}
.hero h2{margin:0;font-size:28px}
.hero p{margin:0;color:var(--muted)}
.pills{display:flex;gap:8px;flex-wrap:wrap}
.pill{font-size:12px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid var(--border)}

/* Catalogue toolbar */
.toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:12px 0}
.field{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.08)}
.field input,.field select{all:unset;color:var(--text)}
.field input::placeholder{color:#cbd5e1}

/* Grid */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
.service{display:flex;flex-direction:column;gap:10px;padding:12px;border-radius:14px;background:rgba(2,6,23,.55);border:1px solid var(--border);transition:.2s}
.service:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.28)}
.service h3{margin:0;font-size:16px}
.meta{display:flex;gap:8px;flex-wrap:wrap}
.chip{font-size:11px;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,.1);border:1px solid var(--border);color:#e2e8f0}
.price{color:#86efac;font-weight:800}
.old{color:#94a3b8;text-decoration:line-through;margin-left:6px;font-weight:500}
.row{display:flex;align-items:center;gap:8px;justify-content:space-between;flex-wrap:wrap}
.qty{display:flex;align-items:center;gap:6px}
.qty input{all:unset;width:76px;text-align:center;background:rgba(255,255,255,.08);padding:6px;border-radius:8px;border:1px solid var(--border);color:var(--text)}
.flag{font-size:16px}

/* Pagination */
.pagination{display:flex;align-items:center;justify-content:center;gap:6px;margin:12px 0;flex-wrap:wrap}
.pagination button{padding:8px 12px;border-radius:10px}
.page-jump{display:flex;align-items:center;gap:6px}

/* Drawer Panier */
.cart{position:fixed;left:0;top:0;height:100%;width:92%;max-width:420px;background:rgba(6,10,22,.96);
  border-right:1px solid var(--border);transform:translateX(-100%);transition:.25s;z-index:40;color:var(--text);padding:18px 14px;overflow:auto;box-shadow:var(--shadow)}
.cart.open{transform:none}
.line{display:flex;justify-content:space-between;gap:10px;margin:6px 0}
.muted{color:var(--muted);font-size:13px}
.divider{height:1px;background:var(--border);margin:10px 0}
.total{font-size:18px;font-weight:800}
.promo{display:flex;gap:6px;margin-top:8px}
.promo input{all:unset;background:rgba(255,255,255,.08);border:1px solid var(--border);padding:8px;border-radius:10px;flex:1}

/* Modals */
.modal{position:fixed;inset:0;background:rgba(2,6,23,.72);display:none;align-items:center;justify-content:center;z-index:45;padding:16px}
.modal.open{display:flex}
.modal .card{max-width:560px;width:100%}

/* Footer */
footer{color:#94a3b8;text-align:center;padding:30px 16px}

/* Responsive tweaks */
@media (min-width:820px){
  .hero{grid-template-columns:1.25fr .75fr;align-items:center}
}
</style>
</head>
<body>
<div class="bg-overlay"></div>

<header>
  <div class="nav">
    <div class="brand" role="banner">
      <div class="logo" aria-hidden="true"></div>
      <h1>PowerBots360</h1>
      <span class="badge" id="langBadge">FR</span>
    </div>
    <div class="actions" role="navigation" aria-label="Top actions">
      <button class="btn" id="openCart">Panier (<span id="cartCount">0</span>)</button>
      <div class="hamb" id="openMenu" aria-label="Ouvrir le menu" aria-controls="sideMenu" aria-expanded="false">
        <span></span><span></span><span></span>
      </div>
    </div>
  </div>
</header>

<!-- Drawer MENU -->
<aside id="sideMenu" class="drawer" aria-label="Menu latéral">
  <div class="menu-head">
    <strong>Menu</strong>
    <button class="btn" id="closeMenu">Fermer</button>
  </div>

  <div class="menu-section">
    <div class="menu-list">
      <a href="#" data-goto="home">🏠 Accueil</a>
      <a href="#" data-goto="catalogue">🗂️ Catalogue</a>
      <a href="#" data-goto="messages">💌 Messages exclusifs</a>
      <a href="#" data-goto="payment">💳 Paiement</a>
      <a href="#" data-goto="games">🎮 Jeux</a>
      <a href="#" data-goto="faq">❓ FAQ</a>
      <a href="#" data-goto="contact">✉️ Contact</a>
      <a href="#" data-goto="legal">⚖️ Légal</a>
    </div>
  </div>

  <div class="menu-section">
    <strong style="display:block;margin-bottom:8px">Catégories</strong>
    <div class="menu-list">
      <button data-platform="all">🌐 Toutes</button>
      <button data-platform="TikTok">🎵 TikTok</button>
      <button data-platform="Instagram">📸 Instagram</button>
      <button data-platform="YouTube">▶️ YouTube</button>
      <button data-platform="Facebook">📘 Facebook</button>
      <button data-platform="Twitter/X">🐦 X</button>
      <button data-platform="Snapchat">👻 Snapchat</button>
      <button data-platform="Twitch">🟣 Twitch</button>
      <button data-platform="Reddit">👽 Reddit</button>
      <button data-platform="LinkedIn">💼 LinkedIn</button>
      <button data-platform="Telegram">✈️ Telegram</button>
      <button data-platform="Spotify">🎧 Spotify</button>
      <button data-platform="Discord">💬 Discord</button>
    </div>
  </div>

  <div class="menu-section">
    <strong style="display:block;margin-bottom:8px">Langue</strong>
    <div class="langbox">
      <button class="btn" data-lang="fr">Français</button>
      <button class="btn" data-lang="en">English</button>
    </div>
  </div>

  <div class="menu-section">
    <strong style="display:block;margin-bottom:8px">Compte</strong>
    <div class="menu-list">
      <button id="openLogin">🔐 Connexion</button>
      <button id="openSignup">🆕 Inscription</button>
      <button id="openAccount" class="hidden">👤 Mon compte</button>
      <button id="logoutBtn" class="hidden">🚪 Déconnexion</button>
    </div>
  </div>
</aside>

<!-- Drawer PANIER -->
<aside id="cart" class="cart" aria-label="Panier">
  <div class="row"><h3 style="margin:0">Panier</h3><button class="btn" id="closeCart">Fermer</button></div>
  <div class="divider"></div>
  <div id="cartItems"></div>
  <div class="divider"></div>
  <div class="line"><span>Sous-total</span><span id="subTotal">€ 0.00</span></div>
  <div class="line"><span>Remise</span><span id="discount">€ 0.00</span></div>
  <div class="total line"><span>Total</span><span id="grandTotal">€ 0.00</span></div>
  <div class="promo">
    <input id="coupon" placeholder="Code promo (WELCOME10 / VIP5)" />
    <button class="btn" id="applyCoupon">Appliquer</button>
  </div>
  <div class="divider"></div>
  <button class="btn btn-primary" id="checkout">Payer avec PayPal</button>
  <div class="muted" style="margin-top:6px">Crypto : bientôt disponible 🚀</div>
</aside>

<main class="container">
  <!-- HOME -->
  <section id="home" class="card">
    <div class="hero">
      <div>
        <h2 id="heroTitle">Des services fiables pour booster vos réseaux — pro, rapides, transparents.</h2>
        <p id="heroSubtitle">Recherche avancée, panier sécurisé, PayPal, pagination 800+ services, multi-langue, notifications, support réactif.</p>
        <div class="pills" style="margin-top:10px">
          <span class="pill">Paiement PayPal</span>
          <span class="pill">800+ services</span>
          <span class="pill">Multi-plateformes</span>
          <span class="pill">Support 24/7</span>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn btn-primary" data-goto="catalogue">Voir le catalogue</button>
          <button class="btn" data-goto="messages">Messages exclusifs</button>
        </div>
      </div>
      <div class="card" style="background:rgba(2,6,23,.55)">
        <div class="row"><strong>Connexion rapide (démo locale)</strong><span class="muted">Aucune donnée côté serveur.</span></div>
        <div class="divider"></div>
        <div class="row" style="gap:8px;flex-wrap:wrap">
          <input id="demoEmail" class="btn" placeholder="email@exemple.com" style="flex:1;min-width:220px;background:rgba(255,255,255,.08)"/>
          <input id="demoPass" class="btn" placeholder="Mot de passe" type="password" style="flex:1;min-width:160px;background:rgba(255,255,255,.08)"/>
          <button class="btn" id="demoSignup">Créer</button>
          <button class="btn" id="demoSignin">Se connecter</button>
          <button class="btn btn-danger" id="demoSignout">Se déconnecter</button>
        </div>
        <div id="authState" class="muted" style="margin-top:8px">Statut : invité</div>
      </div>
    </div>
  </section>

  <!-- CATALOGUE -->
  <section id="catalogue" class="card hidden" aria-label="Catalogue">
    <div class="toolbar">
      <div class="field" style="flex:1"><span>🔎</span><input id="search" placeholder="Rechercher un service (ex : TikTok likes)…"></div>
      <div class="field"><span>🏷️</span>
        <select id="platform">
          <option value="all">Toutes plateformes</option>
          <option>TikTok</option><option>Instagram</option><option>YouTube</option>
          <option>Facebook</option><option>Twitter/X</option><option>Snapchat</option>
          <option>Twitch</option><option>Reddit</option><option>LinkedIn</option>
          <option>Telegram</option><option>Spotify</option><option>Discord</option>
        </select>
      </div>
      <div class="field"><span>⚙️</span>
        <select id="sort">
          <option value="pop">Populaires</option>
          <option value="priceAsc">Prix ↑</option>
          <option value="priceDesc">Prix ↓</option>
        </select>
      </div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="pagination" id="pager">
      <button class="btn" id="prevPage">Précédent</button>
      <span id="pageInfo" class="muted">Page 1 / 1</span>
      <button class="btn" id="nextPage">Suivant</button>
      <div class="page-jump">
        <input id="jumpInput" class="btn" placeholder="Aller à…" style="width:90px;background:rgba(255,255,255,.08);border:1px solid var(--border)"/>
        <button class="btn" id="jumpBtn">OK</button>
      </div>
    </div>
  </section>

  <!-- MESSAGES -->
  <section id="messages" class="card hidden">
    <h3>💌 Messages exclusifs</h3>
    <div class="grid">
      <div class="service">
        <h3>[EXCLUSIF] Offre limitée — -10% avec WELCOME10</h3>
        <div class="meta"><span class="chip">Rareté</span><span class="chip">Temps limité</span></div>
        <p class="muted">Profitez d’une remise sur les services populaires. Valable jusqu’à épuisement.</p>
      </div>
      <div class="service">
        <h3>Annonce : Crypto bientôt disponible</h3>
        <div class="meta"><span class="chip">Bientôt</span></div>
        <p class="muted">Vous pourrez payer en USDT/ETH/Bitcoin. Détails à venir.</p>
      </div>
    </div>
  </section>

  <!-- PAYMENT -->
  <section id="payment" class="card hidden">
    <h3>💳 Paiement</h3>
    <div class="grid">
      <div class="service">
        <h3>PayPal (recommandé)</h3>
        <p class="muted">Paiement sécurisé via PayPal. Cliquez pour renseigner le montant total.</p>
        <button class="btn btn-primary" id="payNow">Payer avec PayPal</button>
        <div class="muted" style="margin-top:6px">Lien : paypal.me/BotMarketPlus</div>
      </div>
      <div class="service">
        <h3>Crypto (bientôt)</h3>
        <div class="meta"><span class="chip">USDT</span><span class="chip">ETH</span><span class="chip">BTC</span></div>
        <p class="muted">Intégration en cours. Vous pourrez régler en crypto à l’avenir.</p>
      </div>
    </div>
  </section>

  <!-- JEUX -->
  <section id="games" class="card hidden">
    <h3>🎮 Jeux (réservés aux inscrits)</h3>
    <p class="muted">Connectez-vous pour accéder aux jeux exclusifs.</p>
    <button class="btn" id="ctaLoginFromGames">Se connecter</button>
  </section>

  <!-- FAQ -->
  <section id="faq" class="card hidden">
    <h3>❓ FAQ</h3>
    <details open class="service">
      <summary><strong>Comment passer commande ?</strong></summary>
      <p class="muted">Ajoutez le service au panier, validez et payez via PayPal. Vous recevez une confirmation immédiate.</p>
    </details>
    <details class="service">
      <summary><strong>Délais & garantie</strong></summary>
      <p class="muted">Chaque fiche indique une estimation. Les services “Refill” incluent une remise en conformité si une baisse survient.</p>
    </details>
    <details class="service">
      <summary><strong>Remboursements</strong></summary>
      <p class="muted">Si un service n’est pas livré, remboursement proportionnel. Aucune promesse de résultat sur des plateformes tierces.</p>
    </details>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="card hidden">
    <h3>✉️ Contact</h3>
    <form id="contactForm" class="grid">
      <input class="btn" name="name" placeholder="Nom complet" required style="background:rgba(255,255,255,.08)"/>
      <input class="btn" name="email" placeholder="Email" type="email" required style="background:rgba(255,255,255,.08)"/>
      <textarea class="btn" name="msg" placeholder="Votre message" rows="4" required style="background:rgba(255,255,255,.08)"></textarea>
      <button class="btn btn-primary" type="submit">Envoyer</button>
    </form>
    <div id="contactOk" class="muted" style="margin-top:8px;display:none">Merci, message envoyé (simulation).</div>
  </section>

  <!-- LEGAL -->
  <section id="legal" class="card hidden">
    <h3>⚖️ Mentions légales & CGV</h3>
    <details open class="service">
      <summary><strong>Mentions légales</strong></summary>
      <p class="muted">PowerBots360 — Contact : support@powerbots360.com — Siège : à compléter.</p>
    </details>
    <details class="service">
      <summary><strong>Conditions</strong></summary>
      <p class="muted">Prestations numériques après paiement. Respect des règles des plateformes. Pas d’usage nuisible.</p>
    </details>
    <details class="service">
      <summary><strong>Confidentialité</strong></summary>
      <p class="muted">Cookies techniques uniquement. Aucune revente de données.</p>
    </details>
  </section>
</main>

<!-- MODAL DETAIL PRODUIT -->
<div class="modal" id="detailModal" role="dialog" aria-modal="true">
  <div class="card">
    <h3 id="dTitle" style="margin-top:0">Détail</h3>
    <p class="muted" id="dDesc">Description du service.</p>
    <div class="row" style="gap:8px;flex-wrap:wrap;margin:8px 0">
      <label class="chip">Quantité
        <input id="dQty" style="margin-left:8px;width:90px;background:rgba(255,255,255,.08);border:1px solid var(--border);padding:6px;border-radius:8px" type="number" min="0">
      </label>
      <label class="chip">Vitesse
        <select id="dSpeed" style="margin-left:8px">
          <option>Instant</option><option>Rapide</option><option>Progressif</option>
        </select>
      </label>
      <label class="chip">Option
        <select id="dTier" style="margin-left:8px">
          <option>Essentiel</option><option>Avancé</option><option>Premium</option><option>Ultime</option>
        </select>
      </label>
    </div>
    <div class="row">
      <div class="muted" id="dEst">Estimation : ~ —</div>
      <div style="display:flex;gap:8px">
        <button class="btn" id="dCancel">Fermer</button>
        <button class="btn btn-primary" id="dAdd">Ajouter au panier</button>
      </div>
    </div>
  </div>
</div>

<!-- MODALS AUTH -->
<div class="modal" id="loginModal" role="dialog" aria-modal="true">
  <div class="card">
    <h3 style="margin-top:0">Connexion</h3>
    <div class="divider"></div>
    <input id="loginEmail" class="btn" placeholder="Email" style="width:100%;margin-bottom:8px;background:rgba(255,255,255,.08)"/>
    <input id="loginPass" class="btn" placeholder="Mot de passe" type="password" style="width:100%;background:rgba(255,255,255,.08)"/>
    <div class="row" style="margin-top:10px">
      <button class="btn" id="loginCancel">Annuler</button>
      <button class="btn btn-primary" id="loginSubmit">Se connecter</button>
    </div>
  </div>
</div>

<div class="modal" id="signupModal" role="dialog" aria-modal="true">
  <div class="card">
    <h3 style="margin-top:0">Inscription</h3>
    <div class="divider"></div>
    <input id="signupName" class="btn" placeholder="Nom complet" style="width:100%;margin-bottom:8px;background:rgba(255,255,255,.08)"/>
    <input id="signupEmail" class="btn" placeholder="Email" style="width:100%;margin-bottom:8px;background:rgba(255,255,255,.08)"/>
    <input id="signupPass" class="btn" placeholder="Mot de passe (min 6)" type="password" style="width:100%;background:rgba(255,255,255,.08)"/>
    <div class="row" style="margin-top:10px">
      <button class="btn" id="signupCancel">Annuler</button>
      <button class="btn btn-primary" id="signupSubmit">Créer le compte</button>
    </div>
  </div>
</div>

<footer>
  <p>&copy; 2025 PowerBots360 – Tous droits réservés</p>
</footer>

<script>
/* ====== ÉTAT GLOBAL ====== */
const state = {
  lang:'fr',
  currency:'EUR',
  rate:{EUR:1,USD:1.08,GBP:0.85},
  catalog:[],
  page:1, pageSize:30, filtered:[],
  cart:[], coupon:null,
  user:null,
  paypalMe:'https://www.paypal.me/BotMarketPlus?locale.x=fr_FR'
};
const PLATFORMS=["TikTok","Instagram","YouTube","Facebook","Twitter/X","Snapchat","Twitch","Reddit","LinkedIn","Telegram","Spotify","Discord"];
const BASE_SERVICES=[
  {name:"Likes",min:100,max:50000,base:1.80,desc:"Engagement mesuré & cohérent."},
  {name:"Abonnés",min:100,max:100000,base:2.20,desc:"Croissance progressive & stable."},
  {name:"Vues",min:500,max:1000000,base:1.50,desc:"Boost de visibilité contrôlé."},
  {name:"Commentaires",min:20,max:10000,base:3.90,desc:"Commentaires variés & naturels."},
  {name:"Live Boost",min:50,max:50000,base:2.80,desc:"Présence sur vos directs."},
  {name:"Partages",min:50,max:50000,base:1.70,desc:"Propagation organique accrue."}
];
const COUNTRIES=[
  {c:"FR",f:"🇫🇷",label:"France"},
  {c:"US",f:"🇺🇸",label:"USA"},
  {c:"BR",f:"🇧🇷",label:"Brésil"},
  {c:"IN",f:"🇮🇳",label:"Inde"},
  {c:"TR",f:"🇹🇷",label:"Turquie"},
  {c:"ID",f:"🇮🇩",label:"Indonésie"},
  {c:"MX",f:"🇲🇽",label:"Mexique"},
  {c:"DE",f:"🇩🇪",label:"Allemagne"},
  {c:"IT",f:"🇮🇹",label:"Italie"},
  {c:"ES",f:"🇪🇸",label:"Espagne"}
];
const TIER_EXPLAIN={
  "Essentiel":"Entrée de gamme fiable, démarrage rapide.",
  "Avancé":"Équilibre prix/perf, baisse de drop.",
  "Premium":"Qualité élevée, meilleurs profils.",
  "Ultime":"Maxi stabilité & priorisation."
};
const i18n={
  fr:{heroTitle:'Des services fiables pour booster vos réseaux — pro, rapides, transparents.',
      heroSubtitle:'Recherche avancée, panier sécurisé, PayPal, 800+ services, multi-langue.'},
  en:{heroTitle:'Reliable services to grow your socials — pro, fast, transparent.',
      heroSubtitle:'Advanced search, secure cart, PayPal, 800+ services, multilingual.'}
};

/* ====== NAVIGATION ====== */
function show(id){
  for(const sec of document.querySelectorAll('main section')) sec.classList.add('hidden');
  document.getElementById(id).classList.remove('hidden');
  closeMenu();
}
document.querySelectorAll('[data-goto]').forEach(b=>b.addEventListener('click',()=>show(b.dataset.goto)));
document.getElementById('ctaLoginFromGames').addEventListener('click',()=>openLogin());

/* Drawer menu */
const sideMenu=document.getElementById('sideMenu');
document.getElementById('openMenu').addEventListener('click',()=>{sideMenu.classList.add('open');document.getElementById('openMenu').setAttribute('aria-expanded','true')});
document.getElementById('closeMenu').addEventListener('click',closeMenu);
function closeMenu(){sideMenu.classList.remove('open');document.getElementById('openMenu').setAttribute('aria-expanded','false')}
sideMenu.addEventListener('click',e=>{
  const p=e.target.closest('[data-platform]'); if(p){ document.getElementById('platform').value=p.dataset.platform; renderGrid(true); show('catalogue'); }
});

/* ====== LANG ====== */
document.querySelectorAll('[data-lang]').forEach(btn=>{
  btn.addEventListener('click',()=>{
    state.lang=btn.dataset.lang;
    document.getElementById('langBadge').textContent=state.lang.toUpperCase();
    document.getElementById('heroTitle').textContent=i18n[state.lang].heroTitle;
    document.getElementById('heroSubtitle').textContent=i18n[state.lang].heroSubtitle;
  });
});

/* ====== CATALOGUE (800+) ====== */
function buildCatalog(){
  const items=[]; let id=1;
  for(const p of PLATFORMS){
    for(const base of BASE_SERVICES){
      for(let n=1;n<=12;n++){ // 12 variantes x 6 types x 12 plateformes = 864
        const country=COUNTRIES[(id+n)%COUNTRIES.length];
        const tag=["Essentiel","Avancé","Premium","Ultime"][(id+n)%4];
        const price = base.base + n*0.07 + (id%7)*0.05;
        items.push({
          id:id++,
          platform:p,
          title:`${p} ${base.name} • ${tag}`,
          speed:["Instant","Rapide","Progressif"][(id+n)%3],
          refill: Math.random()<0.6,
          priceEUR:+price.toFixed(2),
          oldEUR: Math.random()<0.25? +(price*1.2).toFixed(2) : null,
          min: base.min, max: base.max,
          country, tag,
          desc: `${base.desc} ${TIER_EXPLAIN[tag]}`
        });
      }
    }
  }
  state.catalog=items;
}
buildCatalog();

const grid=document.getElementById('grid');
const pagerInfo=document.getElementById('pageInfo');
function formatMoney(n){return `€ ${n.toFixed(2)}`}
function priceFor(item){return item.priceEUR}
function renderCard(item){
  const p = formatMoney(priceFor(item));
  const old = item.oldEUR? `<span class="old">${formatMoney(item.oldEUR)}</span>`:'';
  return `
  <div class="service" data-id="${item.id}">
    <h3>${item.title}</h3>
    <div class="meta">
      <span class="chip">${item.platform}</span>
      <span class="chip">${item.speed}</span>
      ${item.refill?'<span class="chip">Refill</span>':''}
      <span class="chip">${item.tag}</span>
      <span class="chip flag">${item.country.f} ${item.country.label}</span>
    </div>
    <div class="row">
      <div><span class="price">${p}</span> ${old}</div>
      <small class="muted">Min ${item.min} / Max ${item.max}</small>
    </div>
    <div class="row">
      <input class="qtyInput" type="number" min="${item.min}" max="${item.max}" step="${Math.ceil(item.min/5)}" value="${item.min}">
      <div style="display:flex;gap:6px">
        <button class="btn detailBtn">Détail</button>
        <button class="btn btn-primary addBtn">Ajouter</button>
      </div>
    </div>
  </div>`;
}
function applyFilters(){
  const q=document.getElementById('search').value.trim().toLowerCase();
  const pf=document.getElementById('platform').value;
  const sort=document.getElementById('sort').value;
  let list=state.catalog.filter(s=>{
    const okP=(pf==='all')||s.platform===pf;
    const okQ=!q || s.title.toLowerCase().includes(q) || s.country.label.toLowerCase().includes(q);
    return okP && okQ;
  });
  if(sort==='priceAsc') list.sort((a,b)=>a.priceEUR-b.priceEUR);
  if(sort==='priceDesc') list.sort((a,b)=>b.priceEUR-a.priceEUR);
  if(sort==='pop') list.sort(()=>Math.random()-0.5);
  state.filtered=list;
}
function renderGrid(reset=false){
  if(reset){ state.page=1; grid.innerHTML=''; }
  applyFilters();
  const total=state.filtered.length||1;
  const pages=Math.ceil(total/state.pageSize)||1;
  if(state.page>pages) state.page=pages;
  const slice=state.filtered.slice((state.page-1)*state.pageSize, state.page*state.pageSize);
  grid.innerHTML = slice.map(renderCard).join('');
  pagerInfo.textContent=`Page ${state.page} / ${pages}`;
  document.getElementById('prevPage').disabled=(state.page<=1);
  document.getElementById('nextPage').disabled=(state.page>=pages);
}
renderGrid(true);

/* Toolbar events */
document.getElementById('search').addEventListener('input',()=>renderGrid(true));
document.getElementById('platform').addEventListener('change',()=>renderGrid(true));
document.getElementById('sort').addEventListener('change',()=>renderGrid(true));
document.getElementById('prevPage').addEventListener('click',()=>{state.page--; renderGrid(false)});
document.getElementById('nextPage').addEventListener('click',()=>{state.page++; renderGrid(false)});
document.getElementById('jumpBtn').addEventListener('click',()=>{
  const v=parseInt(document.getElementById('jumpInput').value||'1',10);
  const pages=Math.ceil((state.filtered.length||1)/state.pageSize)||1;
  state.page=Math.min(Math.max(1,v),pages);
  renderGrid(false);
});

/* Détail / Ajout */
grid.addEventListener('click',(e)=>{
  const card=e.target.closest('.service'); if(!card) return;
  const id=+card.dataset.id;
  const item=state.catalog.find(s=>s.id===id); if(!item) return;

  if(e.target.classList.contains('detailBtn')){
    openDetail(item, +card.querySelector('.qtyInput').value || item.min);
  }
  if(e.target.classList.contains('addBtn')){
    const qty=+card.querySelector('.qtyInput').value;
    addToCart(item, qty);
  }
});

/* ====== MODAL DETAIL ====== */
const detailModal=document.getElementById('detailModal');
const dTitle=document.getElementById('dTitle');
const dDesc=document.getElementById('dDesc');
const dQty=document.getElementById('dQty');
const dSpeed=document.getElementById('dSpeed');
const dTier=document.getElementById('dTier');
const dEst=document.getElementById('dEst');
let detailItem=null;

function openDetail(item, qty){
  detailItem=item;
  dTitle.textContent=item.title;
  dDesc.textContent=item.desc;
  dQty.min=item.min; dQty.max=item.max; dQty.value=Math.min(Math.max(qty,item.min),item.max);
  dSpeed.value=item.speed;
  dTier.value=item.tag;
  updateEst();
  detailModal.classList.add('open');
}
function updateEst(){
  if(!detailItem) return;
  const qty=+dQty.value||detailItem.min;
  const baseH = dSpeed.value==='Instant'? 1 : dSpeed.value==='Rapide'? 6 : 24;
  dEst.textContent=`Estimation : ~ ${Math.ceil((qty/detailItem.min)*baseH)} h`;
}
dQty.addEventListener('input',updateEst);
dSpeed.addEventListener('change',updateEst);
dTier.addEventListener('change',()=>{ dDesc.textContent = detailItem.desc; });
document.getElementById('dCancel').addEventListener('click',()=>detailModal.classList.remove('open'));
document.getElementById('dAdd').addEventListener('click',()=>{
  addToCart(detailItem, +dQty.value||detailItem.min);
  detailModal.classList.remove('open');
});

/* ====== PANIER ====== */
const cartDrawer=document.getElementById('cart');
document.getElementById('openCart').addEventListener('click',()=>cartDrawer.classList.add('open'));
document.getElementById('closeCart').addEventListener('click',()=>cartDrawer.classList.remove('open'));
const cartCount=document.getElementById('cartCount');

function addToCart(item, qty){
  const q=Math.min(Math.max(qty,item.min), item.max);
  const exist=state.cart.find(c=>c.id===item.id);
  if(exist){ exist.qty += q; } else {
    state.cart.push({id:item.id,title:item.title,platform:item.platform,priceEUR:item.priceEUR,qty:q});
  }
  bumpCart(); renderCart();
}
function bumpCart(){
  cartCount.textContent=state.cart.reduce((a,b)=>a+b.qty,0);
  cartCount.animate([{transform:'scale(1)'},{transform:'scale(1.25)'},{transform:'scale(1)'}],{duration:300});
}
function computeDiscount(subEUR){
  const code=(state.coupon||'').toUpperCase();
  if(code==='WELCOME10') return subEUR*0.10;
  if(code==='VIP5') return subEUR*0.05;
  return 0;
}
function renderCart(){
  const wrap=document.getElementById('cartItems'); wrap.innerHTML='';
  let subEUR=0;
  for(const c of state.cart){
    subEUR += c.priceEUR * c.qty / 1000; // prix /1000 unités
    const line=document.createElement('div'); line.className='line';
    line.innerHTML=`
      <div><strong>${c.title}</strong><div class="muted">${c.qty} unités · ${formatMoney(c.priceEUR)}/1000</div></div>
      <div><button class="btn rm" data-id="${c.id}">✕</button></div>`;
    wrap.appendChild(line);
  }
  const discount=computeDiscount(subEUR);
  document.getElementById('subTotal').textContent=formatMoney(subEUR);
  document.getElementById('discount').textContent=formatMoney(discount);
  document.getElementById('grandTotal').textContent=formatMoney(Math.max(0,subEUR-discount));
  wrap.querySelectorAll('.rm').forEach(b=>{
    b.addEventListener('click',()=>{
      state.cart=state.cart.filter(x=>x.id!==+b.dataset.id);
      bumpCart(); renderCart();
    });
  });
}
document.getElementById('applyCoupon').addEventListener('click',()=>{
  const v=document.getElementById('coupon').value.trim();
  state.coupon=v||null; renderCart();
});

/* Paiement */
document.getElementById('checkout').addEventListener('click',()=>{
  let subEUR=0; for(const c of state.cart) subEUR += c.priceEUR * c.qty / 1000;
  const discount=computeDiscount(subEUR);
  const amount=Math.max(1, +(subEUR-discount).toFixed(2));
  window.open(`${state.paypalMe.replace('?locale.x=fr_FR','')}/${amount}?locale.x=fr_FR`,'_blank');
});
document.getElementById('payNow').addEventListener('click',()=>{
  let subEUR=0; for(const c of state.cart) subEUR += c.priceEUR * c.qty / 1000;
  const discount=computeDiscount(subEUR);
  const amount=Math.max(1, +(subEUR-discount).toFixed(2));
  window.open(`${state.paypalMe.replace('?locale.x=fr_FR','')}/${amount}?locale.x=fr_FR`,'_blank');
});

/* ====== AUTH (démo locale) ====== */
function setUser(u){
  state.user=u;
  document.getElementById('authState').textContent = u ? `Connecté : ${u.email}` : 'Statut : invité';
  document.getElementById('openAccount').classList.toggle('hidden',!u);
  document.getElementById('logoutBtn').classList.toggle('hidden',!u);
}
const demoSignup=document.getElementById('demoSignup');
const demoSignin=document.getElementById('demoSignin');
const demoSignout=document.getElementById('demoSignout');
demoSignup.addEventListener('click',()=>{ const email=document.getElementById('demoEmail').value.trim(); const pass=document.getElementById('demoPass').value.trim(); if(email&&pass.length>=6){localStorage.setItem('pb360_user',JSON.stringify({email})); setUser({email}); alert('Compte créé (démo).')} else alert('Email/mot de passe invalide (min 6).'); });
demoSignin.addEventListener('click',()=>{ const email=document.getElementById('demoEmail').value.trim(); const pass=document.getElementById('demoPass').value.trim(); const s=localStorage.getItem('pb360_user'); if(s){ const u=JSON.parse(s); if(email===u.email&&pass.length>=6){ setUser(u); alert('Connecté.'); } else alert('Identifiants incorrects (démo).')} else alert('Aucun compte (démo). Cliquez “Créer”.'); });
demoSignout.addEventListener('click',()=>{ localStorage.removeItem('pb360_user'); setUser(null); });

/* Modals login/signup accessibles depuis le menu */
const loginModal=document.getElementById('loginModal');
const signupModal=document.getElementById('signupModal');
document.getElementById('openLogin').addEventListener('click',()=>openLogin());
document.getElementById('openSignup').addEventListener('click',()=>openSignup());
document.getElementById('loginCancel').addEventListener('click',()=>loginModal.classList.remove('open'));
document.getElementById('signupCancel').addEventListener('click',()=>signupModal.classList.remove('open'));
document.getElementById('loginSubmit').addEventListener('click',()=>{
  const email=document.getElementById('loginEmail').value.trim();
  const pass=document.getElementById('loginPass').value.trim();
  const s=localStorage.getItem('pb360_user');
  if(s){ const u=JSON.parse(s); if(email===u.email&&pass.length>=6){ setUser(u); loginModal.classList.remove('open'); alert('Connecté.'); } else alert('Identifiants incorrects.'); }
  else alert('Aucun compte. Créez-en un.');
});
document.getElementById('signupSubmit').addEventListener('click',()=>{
  const name=document.getElementById('signupName').value.trim();
  const email=document.getElementById('signupEmail').value.trim();
  const pass=document.getElementById('signupPass').value.trim();
  if(name && email && pass.length>=6){ localStorage.setItem('pb360_user',JSON.stringify({email,name})); setUser({email,name}); signupModal.classList.remove('open'); alert('Compte créé.'); }
  else alert('Veuillez remplir les champs (mot de passe min 6).');
});
document.getElementById('logoutBtn').addEventListener('click',()=>{ localStorage.removeItem('pb360_user'); setUser(null); alert('Déconnecté.'); });
document.getElementById('openAccount').addEventListener('click',()=>{ alert(`Compte : ${state.user?.email||''}`); });

function openLogin(){ closeMenu(); loginModal.classList.add('open'); }
function openSignup(){ closeMenu(); signupModal.classList.add('open'); }

/* ====== CONTACT (simulation) ====== */
document.getElementById('contactForm').addEventListener('submit',(e)=>{
  e.preventDefault(); document.getElementById('contactOk').style.display='block'; e.target.reset();
});

/* ====== Raccourcis menu -> sections ====== */
document.querySelectorAll('.drawer [data-goto], .actions [data-goto], main [data-goto]').forEach(el=>{
  el.addEventListener('click',()=> show(el.dataset.goto));
});
document.querySelector('[data-goto="catalogue"]')?.addEventListener('click',()=>renderGrid(true));

/* ====== INIT ====== */
(function init(){
  const s=localStorage.getItem('pb360_user'); if(s) setUser(JSON.parse(s));
})();
</script>
</body>
</html>
